<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>

    <script>
        /*var array = [1, 2, 3];
        for (var i in array) {
            alert(typeof i + ", " + i);
        }
        alert(array["1"]);
        alert(array[2]);*/


        /*var array = [1, 2, 3];
        alert(array);
        alert(array[0]);

        var objectVar = {
            "hello js object": "this is js Object",
            "name": "Shinyoung Kim",
            "getName": function () { return this.name; }
        };

        alert(objectVar["hello js object"]);
        alert(objectVar.getName());

        for (var key in objectVar) {
            alert(objectVar[key]);
        }*/


        /*with (objectVar) {
            alert("hello js object = " + "hello js object");
            alert("name = " + name);
            alert("getname = " + getName);
        }*/

        /*var objectVar = {};
        objectVar.name = "shinyoung Kim";
        objectVar.age = 33;
        objectVar.getName = function () {
            return this.name;
        };
        objectVar.getAge = function () {
            return this.age;
        };
        objectVar.toString = function () {
            var toStringOutput = '';
            for (var key in this) {
                if (typeof this[key] !== "function") {
                    toStringOutput += '"' + key + '": "' + String(this[key]) + '"\n'
                }
            }
            return toStringOutput;
        }
        alert(objectVar.toString());

        delete objectVar.age;

        alert(objectVar.toString());*/
        
        /*for (var key in objectVar) {
            alert(typeof key + ", " + key);
            switch (typeof objectVar[key]) {
                case "string":
                case "number":
                case "boolean":
                case "object":
                case "undefined":
                    alert(objectVar[key]);
                    break;
                case "function":
                    alert(objectVar[key]());
                    break;
            }
        }*/

        var students = [];

        /* Way1. By Constructor & Prototype of the Object*/
        function Student(name, a, b, c) {
            this.name = name;
            this.a = a;
            this.b = b;
            this.c = c;
        }

        Student.prototype.getSum = function () {
            return this.a + this.b + this.c;
        };
        Student.prototype.getAvg = function () {
            return this.getSum() / 3;
        };
        Student.prototype.toString = function () {
            return this.name + " " + this.getSum() + " " + this.getAvg();
        };

        students.push(new Student("ksy", 88, 99, 67));
        students.push(new Student("abc", 56, 82, 77));
        students.push(new Student("cde", 30, 99, 92));
        students.push(new Student("efw", 46, 98, 90));
        students.push(new Student("qqe", 52, 87, 89));
        students.push(new Student("pwp", 30, 68, 86));
        students.push(new Student("gxx", 99, 88, 79));

        /* Way2. By Custom Constructor Function */
        /*function makeStudent(name, a, b, c) {
            return {
                "name": name,
                "a": a,
                "b": b,
                "c": c,
                "getSum": function () {
                    return this.a + this.b + this.c;
                },
                "getAvg": function () {
                    return this.getSum() / 3;
                },
                "toString": function () {
                    return this.name + " " + this.getSum() + " " + this.getAvg();
                }
            };
        }

        students.push(makeStudent("ksy", 88, 99, 67));
        students.push(makeStudent("abc", 56, 82, 77));
        students.push(makeStudent("cde", 30, 99, 92));
        students.push(makeStudent("efw", 46, 98, 90));
        students.push(makeStudent("qqe", 52, 87, 89));
        students.push(makeStudent("pwp", 30, 68, 86));
        students.push(makeStudent("gxx", 99, 88, 79));*/

        /* Way3. By Literal of the Object */
        /*
        students.push({ "name": "ksy", "a": 88, "b": 99, "c": 67 });
        students.push({ "name": "abc", "a": 56, "b": 82, "c": 77 });
        students.push({ "name": "cde", "a": 30, "b": 99, "c": 92 });
        students.push({ "name": "efw", "a": 46, "b": 98, "c": 90 });
        students.push({ "name": "qqe", "a": 52, "b": 87, "c": 89 });
        students.push({ "name": "pwp", "a": 30, "b": 68, "c": 86 });
        students.push({ "name": "gxx", "a": 99, "b": 88, "c": 79 });
        */

        /*for (var i in students) {
            var _count = 0;
            for (var key in students[i]) {
                if (typeof students[i][key] == "number") {
                    _count++;
                }
            }
            students[i].count = _count;

            students[i].getSum = function () {
                var resultSum = 0;
                for (var key in this) {
                    if (typeof this[key] == "number") {
                        resultSum += this[key];
                    }   
                }
                
                return resultSum;
            }

            students[i].getAvg = function () {
                return this.getSum() / this.count;
            }

            *//************************************************** 
             * 
             * BUG!!!! in "with" keyword!
             * 
             * var _count = 0;
            with (students[i]) {
                window._count = 0;
                for (var key in this) {
                    if (typeof this[key] == "number") {
                        _count++;
                    }
                }
                count = window._count;

                getSum = function () {
                    var resultSum = 0;
                    for (var key in this) {
                        if (typeof this[key] == "number") {
                            resultSum += this[key];
                        }
                    }

                    return resultSum;
                }

                getAvg = function () {
                    return this.getSum() / this.count;
                }
            }
            ************************************************//*
        }*/

        var output = "name sum avg\n";
        for (var i in students) {
            with (students[i]) {
                output += name + " " + getSum() + " " + getAvg() + "\n"; 
            }
        }
        alert(output);

    </script>
</head>
<body>

</body>
</html>